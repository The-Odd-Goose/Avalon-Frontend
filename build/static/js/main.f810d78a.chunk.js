(this.webpackJsonpavalon=this.webpackJsonpavalon||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),i=n(24),s=n.n(i),o=(n(60),n(61),n(11)),u=n(10),j=n.n(u),d=n(15),b=n(82),l=n(76),O=n(25),p=n(26);n(63),n(66);p.a.initializeApp({apiKey:"AIzaSyB-0O4MKOLCzVqgHWg1Ho93D4JvaVO6uRw",authDomain:"the-odd-goose.firebaseapp.com",databaseURL:"https://the-odd-goose.firebaseio.com",projectId:"the-odd-goose",storageBucket:"the-odd-goose.appspot.com",messagingSenderId:"487313202863",appId:"1:487313202863:web:5f793d2cdc66c1bdd07e5a",measurementId:"G-KHHZH32NDE"});var f=p.a.auth(),h=p.a.firestore(),v=n(33),g=n(9),x=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){var a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("Content-Type","application/json"),c=JSON.stringify(t),"https://backend-26kgkl3loq-uc.a.run.app",e.next=6,fetch("".concat("https://backend-26kgkl3loq-uc.a.run.app").concat(r),{method:n,headers:a,body:c,redirect:"follow"}).then(function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=6;break}return e.next=3,t.json();case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,t.text();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("error",e)}));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(e,t){return x(e,"POST",t)},y=function(e,t){return x(e,"DELETE",t)};function k(){return Object(r.jsx)("button",{onClick:function(){var e=new p.a.auth.GoogleAuthProvider;f.signInWithPopup(e)},children:"Sign in with Google"})}function w(){return f.currentUser&&Object(r.jsx)("button",{onClick:function(){return f.signOut()},children:"Sign Out"})}var F=function(){var e=Object(d.a)(j.a.mark((function e(t,n,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:t,gameId:n,uid:r},e.next=3,m(a,"/gameMember");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,uid:n},e.next=3,m(r,"/game");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function S(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),s=Object(o.a)(i,2),u=s[0],p=s[1],h=Object(a.useState)(!1),v=Object(o.a)(h,2),x=v[0],m=v[1],y=Object(a.useState)(""),k=Object(o.a)(y,2),w=k[0],S=k[1],I=Object(a.useState)(!1),C=Object(o.a)(I,2),A=C[0],D=C[1],H=function(){var e=Object(d.a)(j.a.mark((function e(t){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),t.preventDefault(),null==f.currentUser){e.next=8;break}return r=f.currentUser.uid,e.next=6,F(u,n,r);case 6:"string"===typeof(a=e.sent)?(S(a),D(!1)):m(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),t.preventDefault(),null==f.currentUser){e.next=8;break}return n=f.currentUser.uid,e.next=6,M(u,n);case 6:"string"!==typeof(r=e.sent)?(c(r.gameId),m(!0)):(S(r),D(!1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x?Object(r.jsx)(g.a,{to:"/games/".concat(n)}):A?Object(r.jsx)(r.Fragment,{children:"loading..."}):Object(r.jsxs)("div",{children:[w&&Object(r.jsxs)(b.a,{variant:"danger",children:[Object(r.jsx)(b.a.Heading,{children:"An error has occured!"}),Object(r.jsx)("p",{children:w})]}),Object(r.jsxs)(O.a,{onSubmit:H,children:[Object(r.jsxs)(O.a.Group,{children:[Object(r.jsx)(O.a.Label,{children:"Game Room Code:"}),Object(r.jsx)(O.a.Control,{type:"text",onChange:function(e){return c(e.target.value)}}),Object(r.jsx)(O.a.Label,{children:"Nickname:"}),Object(r.jsx)(O.a.Control,{type:"text",onChange:function(e){return p(e.target.value)}}),Object(r.jsx)(O.a.Label,{children:"Or create your own game:"}),Object(r.jsx)(l.a,{variant:"secondary",onClick:L,children:"Host"})]}),Object(r.jsx)(l.a,{variant:"primary",type:"submit",children:"Join"})]})]})}var I=function(e){var t=Object(v.a)(f),n=Object(o.a)(t,1)[0];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w,{}),n?Object(r.jsx)("div",{children:Object(r.jsx)(S,{})}):Object(r.jsx)(k,{})]})},C=n(54),A=n(51),D=n(52),H=n(77),L=n(78),P=n(81),G=n(79),R=[[2,3,2,3,3],[2,3,3,3,4],[3,4,3,4,5],[3,4,4,4,5]],T=function(e){var t=e.players,n=e.turn,c=e.uid,i=e.gameId,s=Object(a.useState)([]),u=Object(o.a)(s,2),O=u[0],p=u[1],f=Object(a.useState)(0),h=Object(o.a)(f,2),v=h[0],g=h[1],x=Object(a.useState)(!1),y=Object(o.a)(x,2),k=y[0],w=y[1],F=Object(a.useState)(""),M=Object(o.a)(F,2),S=M[0],I=M[1];Object(a.useEffect)((function(){if(t){for(var e=t.length,r=[],a=0;a<e;a++)r.push(!1);p(r),g(R[e-5][(n-10)/10])}}),[t]);var C=function(e,t){var n=e.photoURL,a=e.username;return Object(r.jsxs)("span",{children:[Object(r.jsx)(H.a,{src:n,alt:"Profile",roundedCircle:!0,onClick:function(e){return function(e){if(!(v<=0)||O[e]){var t=O;t[e]=!O[e],p(t),g((function(t){return O[e]?t-1:t+1}))}}(t)}})," "," ",a," "," ",O[t]&&Object(r.jsx)(L.a,{variant:"success",children:"Mission Select"})]},t)},A=function(){var e=Object(d.a)(j.a.mark((function e(){var n,r,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(w(!0),n=[],r=0;r<O.length;r++)t&&(a=t[r],O[r]&&a&&n.push(a.uid));return e.next=5,m({uid:c,gameId:i,mission:n},"/proposeMission");case 5:"string"===typeof(s=e.sent)&&I(s),w(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[k&&Object(r.jsx)(r.Fragment,{children:"...loading"}),S&&Object(r.jsx)(b.a,{variant:"danger",children:S}),null===t||void 0===t?void 0:t.map((function(e,t){return C(e,t)})),"Remaining Number of People to add to mission: ",v," ",Object(r.jsx)(l.a,{variant:"outline-warning",onClick:A,disabled:0!==v&&!k,children:"Submit Mission Proposal!"})]})},U=function(e,t){if(e){var n=e.photoURL,a=e.username;return Object(r.jsxs)("span",{children:[Object(r.jsx)(H.a,{src:n,alt:"Profile",roundedCircle:!0})," "," ",a," "," "]},t)}return Object(r.jsx)(r.Fragment,{})},B=function(e){var t=e.gameId,n=e.uid,c=e.voteField,i=e.stringFor,s=e.stringAgainst,u=e.path,O=Object(a.useState)(!1),p=Object(o.a)(O,2),f=p[0],h=p[1],v=Object(a.useState)(""),g=Object(o.a)(v,2),x=g[0],y=g[1],k=Object(a.useState)({show:!1,voteFor:!1}),w=Object(o.a)(k,2),F=w[0],M=w[1],S=function(){var e=Object(d.a)(j.a.mark((function e(){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,m(Object(D.a)({gameId:t,uid:n},c,F.voteFor),u);case 3:"string"===typeof(r=e.sent)&&y(r),h(!1),M({show:!1,voteFor:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){M({show:!0,voteFor:e})},C=function(){return M((function(e){return{show:!1,voteFor:e.voteFor}}))};return Object(r.jsxs)(r.Fragment,{children:[x&&Object(r.jsx)(b.a,{variant:"danger",children:x}),Object(r.jsx)(l.a,{variant:"primary",onClick:function(){return I(!0)},children:i}),Object(r.jsx)(l.a,{variant:"danger",onClick:function(){return I(!1)},children:s}),Object(r.jsxs)(P.a,{show:F.show,onHide:C,backdrop:"static",keyboard:!1,children:[Object(r.jsx)(P.a.Header,{closeButton:!0,children:Object(r.jsx)(P.a.Title,{children:F.voteFor?i:s})}),Object(r.jsx)(P.a.Body,{children:f?"...loading":"Are you sure you want to vote this way?"}),Object(r.jsxs)(P.a.Footer,{children:[Object(r.jsx)(l.a,{variant:"secondary",onClick:C,children:"Cancel"}),Object(r.jsx)(l.a,{variant:"primary",onClick:S,children:"Yes"})]})]})]})},V=function(e,t){return e.reduce((function(e,n){return e||t===n}),!1)},E=function(e){var t=e.voteFor,n=e.voteAgainst,a=e.mission,c=e.vote,i=e.players,s=e.uid,o=e.gameId,u=V(c,s);return Object(r.jsxs)(r.Fragment,{children:["Players on Mission: "," ",null===a||void 0===a?void 0:a.map((function(e,t){return U(i.get(e),t)})),Object(r.jsx)("hr",{}),c&&(null===c||void 0===c?void 0:c.map((function(e,t){return U(i.get(e),t)}))),Object(r.jsx)("hr",{}),"Voted For: "," ",null===t||void 0===t?void 0:t.map((function(e,t){return U(i.get(e),t)})),Object(r.jsx)("hr",{}),"Voted Against: "," ",null===n||void 0===n?void 0:n.map((function(e,t){return U(i.get(e),t)})),Object(r.jsx)("hr",{}),u&&Object(r.jsx)(B,{gameId:o,uid:s,voteField:"voteFor",path:"/voteMission",stringAgainst:"Vote Against Mission",stringFor:"Vote For Mission"})]})},Y=function(e){var t=e.mission,n=e.uid,a=e.gameId,c=V(t,n);return Object(r.jsx)(r.Fragment,{children:c&&Object(r.jsxs)(r.Fragment,{children:["Decide on mission!",Object(r.jsx)(B,{gameId:a,uid:n,voteField:"vote",path:"/choose",stringAgainst:"Fail Mission",stringFor:"Succeed Mission"})]})})},z=function(e,t,n,r){for(var a=[],c=0;c<t;c++)e<c+1?a.push(n(c)):a.push(r(c));return a},N=function(e){var t=e.successMission,n=e.failMission;return Object(r.jsxs)(r.Fragment,{children:["Votes for success: ",t," "," "," Votes for fail: ",n]})},J=function(e){var t=e.gameData,n=e.missionMaker,a=e.players,c=e.uid,i=e.gameId,s=e.playersDict,o=t.success,u=t.turn,j=t.fail,d=t.rejected,b=t.voteFor,l=t.voteAgainst,O=t.vote,p=t.mission,f=t.successMission,h=t.failMission,v=z(o,3,(function(e){return Object(r.jsx)(G.a,{animation:"border",variant:"secondary"},e)}),(function(e){return Object(r.jsx)(G.a,{animation:"grow",variant:"success"},e)})),g=z(j,3,(function(e){return Object(r.jsx)(G.a,{animation:"border",variant:"secondary"},e)}),(function(e){return Object(r.jsx)(G.a,{animation:"grow",variant:"danger"},e)})),x=z(d,5,(function(e){return Object(r.jsx)(G.a,{animation:"border",variant:"secondary"},e)}),(function(e){return Object(r.jsx)(G.a,{animation:"grow",variant:"dark"},e)}));return Object(r.jsxs)("div",{children:["Mission Successes: ",v," ","Mission Fails: ",g," ","Mission Rejections: ",x,Object(r.jsx)("hr",{}),u%10===0&&u<60&&Object(r.jsxs)(r.Fragment,{children:[u>=20&&Object(r.jsx)(N,{successMission:f,failMission:h}),n===c&&Object(r.jsxs)(r.Fragment,{children:["Possible Mission People:",Object(r.jsx)(T,{players:a,turn:u,uid:n,gameId:i})]})]}),(u%10===1||u%10===5)&&Object(r.jsx)(E,{gameId:i,uid:c,voteFor:b,voteAgainst:l,vote:O,mission:p,players:s}),u%10===5&&Object(r.jsx)(Y,{gameId:i,uid:c,mission:p})]})},W=n(48),q=n(83),K=n(80),Z=function(e){var t=e.player,n=e.status,a=e.missionMaker;return t&&function(e){var t=e.photoURL,c=e.username;return Object(r.jsxs)(q.a,{border:"secondary",bg:a?"primary":"secondary",children:[a&&Object(r.jsx)(q.a.Header,{children:"Mission Maker"}),Object(r.jsx)(q.a.Img,{variant:"top",src:t,alt:"Profile"}),Object(r.jsxs)(q.a.Body,{children:[Object(r.jsx)(q.a.Title,{children:c}),Object(r.jsx)(q.a.Text,{children:n})]})]})}(t)},Q=function(e){var t=e.players,n=e.loading,a=e.user,c=e.missionMaker;return n?Object(r.jsx)(r.Fragment,{children:"loading..."}):Object(r.jsx)(K.a,{children:t&&t.map((function(e,t){var n="";return e.uid===a.uid&&(n+="YOU!",n=e.merlin?"You are the Goose Wizard!":e.morgana?"You are the Duck Witch":e.mordred?"You are the rubber ducky!":e.percival?"You are the duck knight!":"You are a normal duck citizen!"),e.bad&&(a.bad||!e.mordred&&a.merlin)&&(n+="BAD Gooose - Tis a duck!!"),(e.merlin||e.morgana)&&a.percival&&(n+="Goose wizard or Duck Witch!"),n+=" NORMAL!",Object(r.jsx)(Z,{player:e,status:n,missionMaker:e.uid===c},t)}))})},X=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={gameId:n,uid:t},console.log("deleted game"),e.next=4,y(r,"/game");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(e){var t=e.user,n=e.gameId,c=Object(a.useState)(""),i=Object(o.a)(c,2),s=i[0],u=i[1],O=function(){var e=Object(d.a)(j.a.mark((function e(){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t.uid,n);case 2:"string"===typeof(r=e.sent)&&u(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(j.a.mark((function e(){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("start game"),r={gameId:n,uid:t.uid},e.next=4,m(r,"/startGame");case 4:"string"===typeof(a=e.sent)&&u(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[s&&Object(r.jsxs)(b.a,{variant:"danger",children:[Object(r.jsx)(b.a.Heading,{children:"An error occured while trying to start the game!"}),Object(r.jsx)("p",{children:s})]}),Object(r.jsx)(l.a,{variant:"danger",onClick:O,children:"Delete Game"}),Object(r.jsx)(l.a,{variant:"primary",onClick:p,children:"(Re)Start Game"})]})},_=function(e){var t=Object(g.g)().gameId,n=h.collection("games").doc(t),c=Object(W.b)(n),i=Object(o.a)(c,2),s=i[0],u=i[1],j=Object(v.a)(f),d=Object(o.a)(j,1)[0],b=n.collection("players"),O=Object(W.a)(b,{idField:"id"}),p=Object(o.a)(O,2),x=p[0],m=p[1],y=Object(a.useState)(!1),k=Object(o.a)(y,2),w=k[0],F=k[1],M=Object(a.useState)(!1),S=Object(o.a)(M,2),I=S[0],C=S[1],D=Object(a.useState)({}),H=Object(o.a)(D,2),L=H[0],P=H[1],G=Object(a.useState)(""),R=Object(o.a)(G,2),T=R[0],U=R[1],B=Object(a.useState)(new Map),V=Object(o.a)(B,2),E=V[0],Y=V[1];return Object(a.useEffect)((function(){if(!u&&!m&&d&&void 0!==s){var e=function(e,t){if(!e)return[!1,!1,{},new Map];var n,r=!0,a=!1,c={},i=new Map,s=Object(A.a)(e);try{for(s.s();!(n=s.n()).done;){var o=n.value,u=o.uid;"string"===typeof u&&i.set(u,o),o.uid===t.uid&&(r=!1,a=o.owner||a,c=o)}}catch(j){s.e(j)}finally{s.f()}return[r,a,c,i]}(x,d),t=Object(o.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];C(!!n),F(!!r),P(a),Y(c),0!==s.turn&&U(s.playersList[s.missionMaker])}}),[u,m,s]),u||m||d&&void 0!==s&&!I?u||m?Object(r.jsx)(r.Fragment,{children:"loading..."}):Object(r.jsxs)("div",{children:["The Room Code is: ",t,Object(r.jsx)("br",{}),"Turn: ",s.turn,Object(r.jsx)("hr",{}),Object(r.jsx)(Q,{players:x,loading:m,user:L,missionMaker:T}),Object(r.jsx)("hr",{}),0===s.turn?Object(r.jsx)("p",{children:"Game has not started yet!"}):Object(r.jsx)(J,{gameData:s,gameId:t,players:x,uid:d.uid,missionMaker:T,playersDict:E}),Object(r.jsx)("hr",{}),60===s.turn&&s.winner,Object(r.jsx)("hr",{}),w&&Object(r.jsx)($,{gameId:t,user:L}),Object(r.jsx)(l.a,{variant:"outline-info",href:"/",children:"Home"})]}):Object(r.jsx)(g.a,{to:"/"})};n(73);var ee=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(C.a,{children:Object(r.jsxs)(g.d,{children:[Object(r.jsx)(g.b,{path:"/games/:gameId",children:Object(r.jsx)(_,{})}),Object(r.jsx)(g.b,{path:"/",children:Object(r.jsx)(I,{})})]})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ee,{})}),document.getElementById("root")),te()}},[[74,1,2]]]);
//# sourceMappingURL=main.f810d78a.chunk.js.map